<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · NighttimeLights.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://github.com/xKDR/NighttimeLights.jl/tutorial/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">NighttimeLights.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../concepts/">Basic concepts</a></li><li><a class="tocitem" href="../polygons/">Polygons and shapefiles</a></li><li><a class="tocitem" href="../data_cleaning/">Data Cleaning</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a><ul class="internal"><li><a class="tocitem" href="#.-Make-a-coordinate-system-of-Mumbai."><span>1. Make a coordinate system of Mumbai.</span></a></li><li><a class="tocitem" href="#.-Downloading-the-data"><span>2. Downloading the data</span></a></li><li><a class="tocitem" href="#.-Loading-the-data"><span>3. Loading the data</span></a></li><li><a class="tocitem" href="#.-Cleaning-Data"><span>4. Cleaning Data</span></a></li><li><a class="tocitem" href="#.-Generating-Aggregates"><span>5. Generating Aggregates</span></a></li></ul></li><li><a class="tocitem" href="../plots/">Plots</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/xKDR/NighttimeLights.jl/blob/main/docs/src/tutorial.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial"><a class="docs-heading-anchor" href="#Tutorial">Tutorial</a><a id="Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorial" title="Permalink"></a></h1><p>The following example demonstrates how to use nighttime lights data for research. First the dataset is cleaned and then aggregate of polygons are produced. The following tutorial shows the cleaning procedure for monthly nighttime lights of a box around Mumbai and then the time series of aggregate radiance for each district of Mumbai is generated. The radiance and cloud-free observations datacubes for Mumbai and the district level shapefiles for Mumbai can be downloaded from <a href="https://github.com/xKDR/NighttimeLights.jl/tree/main/assets">assets provided with the package</a>. </p><h2 id=".-Make-a-coordinate-system-of-Mumbai."><a class="docs-heading-anchor" href="#.-Make-a-coordinate-system-of-Mumbai.">1. Make a coordinate system of Mumbai.</a><a id=".-Make-a-coordinate-system-of-Mumbai.-1"></a><a class="docs-heading-anchor-permalink" href="#.-Make-a-coordinate-system-of-Mumbai." title="Permalink"></a></h2><p>The top left pixel of the box around Mumbai, which we have used so far, have coordinates <code>(19.49907,72.721252)</code>. The bottom right pixel&#39;s coordinates are <code>(18.849475, 73.074187)</code>. We will create a coordinate system from the existing <code>TILE3_COORDINATE_SYSTEM</code></p><pre><code class="language-julia hljs">my_coordinate_system = translate_geometry(TILE3_COORDINATE_SYSTEM, Coordinate(19.49907, 72.721252), Coordinate(18.849475, 73.074187))</code></pre><p>This coordinate system also comes predefined with the package. You can use the global variable <code>MUMBAI_COORDINATE_SYSTEM</code>. </p><pre><code class="language-julia hljs">my_coordinate_system = MUMBAI_COORDINATE_SYSTEM</code></pre><h2 id=".-Downloading-the-data"><a class="docs-heading-anchor" href="#.-Downloading-the-data">2. Downloading the data</a><a id=".-Downloading-the-data-1"></a><a class="docs-heading-anchor-permalink" href="#.-Downloading-the-data" title="Permalink"></a></h2><p>You can use <code>load_example()</code> to load the sample datacubes. However, the following steps can be used to learn the downloading process.  </p><ol><li>Create a folder called &quot;radiance&quot; and a folder called &quot;cfobs&quot;. We will use these folders to the radiance and the cloud-free observations images respectively. </li><li>Go to the VIIRS Nighttime Lights download page at <a href="https://eogdata.mines.edu/nighttime_light/monthly/v10/">Earth Observation Group</a></li><li>Click on <code>2017</code>, the on <code>201704</code>. This means April 2017. </li><li>Click on vcmcfg (we will use this version of the dataset)</li><li>Click on <code>SVDNB_npp_20170401-20170430_75N060E_vcmcfg_v10_c201705011300.tgz</code>. Note that the filename has 75N060E in it. This means TILE3, where Mumbai is. </li><li>Extract the tar files. Put <code>SVDNB_npp_20170401-20170430_75N060E_vcmcfg_v10_c201705011300.avg_rade9h.tif</code> in the radiance folder. Put <code>SVDNB_npp_20170401-20170430_75N060E_vcmcfg_v10_c201705011300.cf_cvg.tif</code> in the cfobs folder. </li><li>Repeat the process for all the months. If you  are interested only in a certain set of months. Download only those. </li></ol><h2 id=".-Loading-the-data"><a class="docs-heading-anchor" href="#.-Loading-the-data">3. Loading the data</a><a id=".-Loading-the-data-1"></a><a class="docs-heading-anchor-permalink" href="#.-Loading-the-data" title="Permalink"></a></h2><p>Create data cubes for radiance and cloud-free observations. </p><pre><code class="language-julia hljs">radiance_datacube = make_datacube(&quot;~/Downloads/radiance&quot;, TILE3_COORDINATE_SYSTEM, my_coordinate_system)

clouds_datacube = make_datacube(&quot;~/Downloads/cfobs&quot;,  TILE3_COORDINATE_SYSTEM, my_coordinate_system)</code></pre><p>If you haven&#39;t downloaded the data and you want to run the code on an example, run: </p><pre><code class="language-julia hljs">load_example()</code></pre><h2 id=".-Cleaning-Data"><a class="docs-heading-anchor" href="#.-Cleaning-Data">4. Cleaning Data</a><a id=".-Cleaning-Data-1"></a><a class="docs-heading-anchor-permalink" href="#.-Cleaning-Data" title="Permalink"></a></h2><p>Convention cleaning can be performed using the <code>conventonal_cleaning</code> function. </p><pre><code class="language-julia hljs">cleaned_datacube = conventonal_cleaning(radiance_datacube, clouds_datacube) </code></pre><p>Or new cleaning described in PSTT2021 can be performed using the <code>PSTT2021</code> function. </p><pre><code class="language-julia hljs">cleaned_datacube = PSTT2021(radiance_datacube, clouds_datacube) </code></pre><h2 id=".-Generating-Aggregates"><a class="docs-heading-anchor" href="#.-Generating-Aggregates">5. Generating Aggregates</a><a id=".-Generating-Aggregates-1"></a><a class="docs-heading-anchor-permalink" href="#.-Generating-Aggregates" title="Permalink"></a></h2><ol><li>Load the shape file for the districts of Mumbai. </li></ol><p>You can download the <a href="https://github.com/xKDR/NighttimeLights.jl/tree/main/assets/mumbai_map">district level shapefile of Mumbai</a> or load it using <code>load_example()</code>. </p><pre><code class="language-julia hljs">mumbai_map = load_shp(&quot;~Downloads/mumbai_map.shp&quot;)</code></pre><p>These have been created from the datameet shapefiles of India, based on 2011. </p><p>The shapefile has a column called <code>DISTRICT</code>. For each district, the name of the district is shown in this column. This column will be used as column names of the dataset that we&#39;ll generate in the next step. We could have also used census code or any other column with unique names. </p><ol><li>Generate the time series of aggregate radiance for each district of Mumbai. </li></ol><pre><code class="language-julia hljs">mumbai_district_ntl = aggregate_dataframe(MUMBAI_COORDINATE_SYSTEM, cleaned_datacube, mumbai_map)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../data_cleaning/">« Data Cleaning</a><a class="docs-footer-nextpage" href="../plots/">Plots »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 5 September 2022 13:05">Monday 5 September 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
