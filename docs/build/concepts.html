<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Basic concepts · NighttimeLights.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://github.com/xKDR/NighttimeLights.jl/concepts.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">NighttimeLights.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li class="is-active"><a class="tocitem" href="concepts.html">Basic concepts</a><ul class="internal"><li><a class="tocitem" href="#Data-structure"><span>Data structure</span></a></li><li><a class="tocitem" href="#Data-IO"><span>Data IO</span></a></li><li><a class="tocitem" href="#Indexing"><span>Indexing</span></a></li></ul></li><li><a class="tocitem" href="data_cleaning.html">Data Cleaning</a></li><li><a class="tocitem" href="tutorial.html">Tutorial</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="concepts.html">Basic concepts</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="concepts.html">Basic concepts</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/xKDR/NighttimeLights.jl/blob/main/docs/src/concepts.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Basics-of-nighttime-lights-data"><a class="docs-heading-anchor" href="#Basics-of-nighttime-lights-data">Basics of nighttime lights data</a><a id="Basics-of-nighttime-lights-data-1"></a><a class="docs-heading-anchor-permalink" href="#Basics-of-nighttime-lights-data" title="Permalink"></a></h1><h2 id="Data-structure"><a class="docs-heading-anchor" href="#Data-structure">Data structure</a><a id="Data-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Data-structure" title="Permalink"></a></h2><p>NOAA provides tif files of the nightlights images. These are represented as 2D arrays with floating-point values. Tif files can be read using the <a href="https://github.com/rafaqz/Rasters.jl/">Rasters.jl</a> package. While nighttime lights images are 2D arrays, reading them as Raster files creates an extra dimension for bands, which is irrelevant for nightlights images. We will ignore the extra dimension and refer to the image as 2D arrays instead of 3D. </p><p>Images of different months are stacked together to form 3D arrays. Such 3D arrays are called datacubes. Once again, there is an extra dimension for bands, which will be ignore and treat the 4D arrays as 3D. </p><h2 id="Data-IO"><a class="docs-heading-anchor" href="#Data-IO">Data IO</a><a id="Data-IO-1"></a><a class="docs-heading-anchor-permalink" href="#Data-IO" title="Permalink"></a></h2><p>While the Rasters.jl has a comprehensive <a href="https://rafaqz.github.io/Rasters.jl/dev/">documentation</a>. This page shows some concepts needed to be known to study nighttime lights. </p><p>The package can be used to load 2D matrices, saved as <code>.tif</code> files, and 3D matrices. saved as <code>.nc</code> files using the <code>Raster</code> functions. </p><p>For example: </p><pre><code class="language-julia hljs">using Rasters
image = Raster(&quot;file.tif&quot;)
datacube = Raster(&quot;file.nc&quot;)</code></pre><p>NOAA provides images of different months in separate <code>.tif</code> files. It is often required to combined these into a single datacube.  A list of <code>.tif</code> files can be joined together to make a datacube using <code>Rasters.combine</code>.  </p><p>For example: </p><pre><code class="language-julia hljs">using Rasters
filelist = readdir(&quot;path&quot;)
radiances = [Raster(i, lazy = true) for i in filelist]
timestamps = collect(1:length(radiances))
series = RasterSeries(radiances, Ti(timestamps))
datacube = Rasters.combine(series, Ti)</code></pre><p><code>write</code> function from Rasters can be used to write images into <code>.tif</code> files and datacubes into <code>.nc</code> files. </p><p>For example: </p><pre><code class="language-julia hljs">write(&quot;datacube.nc&quot;, datacube)
write(&quot;image.tif&quot;, image)</code></pre><h2 id="Indexing"><a class="docs-heading-anchor" href="#Indexing">Indexing</a><a id="Indexing-1"></a><a class="docs-heading-anchor-permalink" href="#Indexing" title="Permalink"></a></h2><p>The dimension regarding bands can be hidden using <code>view</code> as nighttime lights are single band images and then images can be indexed like 2D arrays and datacubes can be indexed like 3D arrays. </p><p>For example:</p><pre><code class="language-julia hljs">image = view(image, Band(1))
image[1, 2] # value of the image at location [1, 2]. 1st row and 2nd column 
datacube = view(datacube, Band(1))
datacube[:, :, 3] # Image of the 3rd month.
datacube[1, 2, :] # Time series values of the pixel at location 1, 2
datacube[1, 2, 3] # Value of the image at location [1, 2] of the 3rd month</code></pre><p>Longitude and latitude can also be used for indexing.  For example:</p><pre><code class="language-julia hljs">image[X(Near(77.1025)), Y(Near(28.7041))] # value of image near longitude = 77.1025 and latitude = 28.7041
datacube[X(Near(77.1025)), Y(Near(28.7041))] # timeseries of near longitude = 77.1025 and latitude = 28.7041
datacube[X(Near(72.8284)), Y(Near(19.05)), Ti(At(201204))] # value of image near longitude = 77.1025 and latitude = 28.7041 at Time = 201204 </code></pre><p>In some cases, one may need to convert row and column numbers to latitude and longitude. One can use <code>map</code>. </p><p>For example:</p><pre><code class="language-julia hljs">row = 10 
column = 10 
longitude, latitude = map(getindex, dims(raster), [column, row]) </code></pre><p>In some cases, one may need to convert (longtitude, latitude) to row and column numbers. One can use <code>dims2indices</code> function from <code>DimensionalData.jl</code>. </p><p>For example:</p><pre><code class="language-julia hljs">using Rasters
using DimensionalData
DimensionalData.dims2indices(dims(raster)[1], X(Near(72.7625))) # column number corresponding to longitude
DimensionalData.dims2indices(dims(raster)[2], Y(Near(19.4583))) # row number corresponding to latitude</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« Home</a><a class="docs-footer-nextpage" href="data_cleaning.html">Data Cleaning »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Friday 28 October 2022 10:45">Friday 28 October 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
